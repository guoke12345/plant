;(function($){
	$.goTop = function(options){
		var opts = $.extend({},$.goTop.defaults,$.goTop.methods,options);
		//opts.innit();
		//alert(method.top);
		opts.remove("#toolbar");
		var $toolbar = opts.innit(opts);
		var $goTop = $toolbar.find(".toolbar-top");
		opts.events($goTop);
	};
	$.goTop.defaults = {
		weixinishide:"block",
		feedbarishide:"block",
		appishide:"block",
		bottom:25,
		right:25
	};
	$.goTop.methods = {
		innit : function(opts){
			var $toolbar = $("#toolbar");
			if(!$toolbar[0]){
				$toolbar = $("<div id='toolbar' style='position:fixed;right:"+opts.right+"px;bottom:"+opts.bottom+"px;'>"+
				"<a href='javascript:;' style='display:"+opts.weixinishide+"'  class='toolbar-item toolbar-weixin'>"+
				"	<span class='toolbar-layer' style='background:url("+opts.bgurl+");background-position:"+opts.weixinbgpos+"'></span>"+
				"</a>"+
				"<a href='fmessageAction!message.action' style='display:"+opts.feedbarishide+"' class='toolbar-item toolbar-feedback'></a>"+
				"<a href='javascript:;' style='display:"+opts.appishide+"' class='toolbar-item toolbar-app'>"+
				"	<span class='toolbar-layer' style='background:url("+opts.bgurl+");background-position:"+opts.appbgpos+"'></span>"+
				"</a>"+
				"<a href='javascript:;' style ='display:none;' class='toolbar-item toolbar-top'></a>"+
				"</div>");
				$("body").stop().append($toolbar);
			}
			return $toolbar;
		},
		events : function($goTop){
			var $goTop = $goTop;
			$(window).scroll(function(){
				var _top = parseFloat($(window).scrollTop());
				if(_top>100){
					$goTop.show();
				}else{
					$goTop.hide();
				};	
			});		
			
        	$goTop.on("click",function(){
        		$('body,html').animate({ scrollTop:0 },500);
	    		return false;
        	});
		},
		remove : function(element){
			var $element = $(element);
			if($element){
				$element.remove();
			};
		}
	};
})(jQuery);